(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1520:function(e,r,a){Promise.resolve().then(a.bind(a,9422))},9422:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return P}});var s=a(3827),n=a(7908),l=a(4090),t=a(5342),[i,o]=(0,a(2901).k)({name:"ButtonGroupContext",strict:!1}),d=a(4808),c=a(8260),u=a(3308),m=a(3908),p=a(2126),b=a(9076),g=a(5487),f=a(1244),h=(0,g.tv)({base:["z-0","group","relative","inline-flex","items-center","justify-center","box-border","appearance-none","outline-none","select-none","whitespace-nowrap","min-w-max","font-normal","subpixel-antialiased","overflow-hidden","tap-highlight-transparent",...f.Dh],variants:{variant:{solid:"",bordered:"border-medium bg-transparent",light:"bg-transparent",flat:"",faded:"border-medium",shadow:"",ghost:"border-medium bg-transparent"},size:{sm:"px-unit-3 min-w-unit-16 h-unit-8 text-tiny gap-unit-2 rounded-small",md:"px-unit-4 min-w-unit-20 h-unit-10 text-small gap-unit-2 rounded-medium",lg:"px-unit-6 min-w-unit-24 h-unit-12 text-medium gap-unit-3 rounded-large"},color:{default:"",primary:"",secondary:"",success:"",warning:"",danger:""},radius:{none:"rounded-none",sm:"rounded-small",md:"rounded-medium",lg:"rounded-large",full:"rounded-full"},fullWidth:{true:"w-full"},isDisabled:{true:"opacity-disabled pointer-events-none"},isInGroup:{true:"[&:not(:first-child):not(:last-child)]:rounded-none"},isIconOnly:{true:"px-unit-0 !gap-unit-0",false:"[&>svg]:max-w-[theme(spacing.unit-8)]"},disableAnimation:{true:"!transition-none",false:"data-[pressed=true]:scale-[0.97] transition-transform-colors-opacity motion-reduce:transition-none"}},defaultVariants:{size:"md",variant:"solid",color:"default",fullWidth:!1,isDisabled:!1,isInGroup:!1,disableAnimation:!1},compoundVariants:[{variant:"solid",color:"default",class:b.J.solid.default},{variant:"solid",color:"primary",class:b.J.solid.primary},{variant:"solid",color:"secondary",class:b.J.solid.secondary},{variant:"solid",color:"success",class:b.J.solid.success},{variant:"solid",color:"warning",class:b.J.solid.warning},{variant:"solid",color:"danger",class:b.J.solid.danger},{variant:"shadow",color:"default",class:b.J.shadow.default},{variant:"shadow",color:"primary",class:b.J.shadow.primary},{variant:"shadow",color:"secondary",class:b.J.shadow.secondary},{variant:"shadow",color:"success",class:b.J.shadow.success},{variant:"shadow",color:"warning",class:b.J.shadow.warning},{variant:"shadow",color:"danger",class:b.J.shadow.danger},{variant:"bordered",color:"default",class:b.J.bordered.default},{variant:"bordered",color:"primary",class:b.J.bordered.primary},{variant:"bordered",color:"secondary",class:b.J.bordered.secondary},{variant:"bordered",color:"success",class:b.J.bordered.success},{variant:"bordered",color:"warning",class:b.J.bordered.warning},{variant:"bordered",color:"danger",class:b.J.bordered.danger},{variant:"flat",color:"default",class:b.J.flat.default},{variant:"flat",color:"primary",class:b.J.flat.primary},{variant:"flat",color:"secondary",class:b.J.flat.secondary},{variant:"flat",color:"success",class:b.J.flat.success},{variant:"flat",color:"warning",class:b.J.flat.warning},{variant:"flat",color:"danger",class:b.J.flat.danger},{variant:"faded",color:"default",class:b.J.faded.default},{variant:"faded",color:"primary",class:b.J.faded.primary},{variant:"faded",color:"secondary",class:b.J.faded.secondary},{variant:"faded",color:"success",class:b.J.faded.success},{variant:"faded",color:"warning",class:b.J.faded.warning},{variant:"faded",color:"danger",class:b.J.faded.danger},{variant:"light",color:"default",class:[b.J.light.default,"data-[hover=true]:bg-default/40"]},{variant:"light",color:"primary",class:[b.J.light.primary,"data-[hover=true]:bg-primary/20"]},{variant:"light",color:"secondary",class:[b.J.light.secondary,"data-[hover=true]:bg-secondary/20"]},{variant:"light",color:"success",class:[b.J.light.success,"data-[hover=true]:bg-success/20"]},{variant:"light",color:"warning",class:[b.J.light.warning,"data-[hover=true]:bg-warning/20"]},{variant:"light",color:"danger",class:[b.J.light.danger,"data-[hover=true]:bg-danger/20"]},{variant:"ghost",color:"default",class:b.J.ghost.default},{variant:"ghost",color:"primary",class:b.J.ghost.primary},{variant:"ghost",color:"secondary",class:b.J.ghost.secondary},{variant:"ghost",color:"success",class:b.J.ghost.success},{variant:"ghost",color:"warning",class:b.J.ghost.warning},{variant:"ghost",color:"danger",class:b.J.ghost.danger},{isInGroup:!0,class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,size:"sm",class:"rounded-none first:rounded-s-small last:rounded-e-small"},{isInGroup:!0,size:"md",class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,size:"lg",class:"rounded-none first:rounded-s-large last:rounded-e-large"},{isInGroup:!0,isRounded:!0,class:"rounded-none first:rounded-s-full last:rounded-e-full"},{isInGroup:!0,radius:"none",class:"rounded-none first:rounded-s-none last:rounded-e-none"},{isInGroup:!0,radius:"sm",class:"rounded-none first:rounded-s-small last:rounded-e-small"},{isInGroup:!0,radius:"md",class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,radius:"lg",class:"rounded-none first:rounded-s-large last:rounded-e-large"},{isInGroup:!0,radius:"full",class:"rounded-none first:rounded-s-full last:rounded-e-full"},{isInGroup:!0,variant:["ghost","bordered"],color:"default",className:f.Zs.default},{isInGroup:!0,variant:["ghost","bordered"],color:"primary",className:f.Zs.primary},{isInGroup:!0,variant:["ghost","bordered"],color:"secondary",className:f.Zs.secondary},{isInGroup:!0,variant:["ghost","bordered"],color:"success",className:f.Zs.success},{isInGroup:!0,variant:["ghost","bordered"],color:"warning",className:f.Zs.warning},{isInGroup:!0,variant:["ghost","bordered"],color:"danger",className:f.Zs.danger},{isIconOnly:!0,size:"sm",class:"min-w-unit-8 w-unit-8 h-unit-8"},{isIconOnly:!0,size:"md",class:"min-w-unit-10 w-unit-10 h-unit-10"},{isIconOnly:!0,size:"lg",class:"min-w-unit-12 w-unit-12 h-unit-12"},{variant:["solid","faded","flat","bordered","shadow"],class:"data-[hover=true]:opacity-hover"}]});(0,g.tv)({base:"inline-flex items-center justify-center h-auto",variants:{fullWidth:{true:"w-full"}},defaultVariants:{fullWidth:!1}});var v=a(6411),x=a(7728),y=a(4291),w=(0,g.tv)({slots:{base:"relative inline-flex flex-col gap-2 items-center justify-center",wrapper:"relative flex",circle1:["absolute","w-full","h-full","rounded-full","animate-spinner-ease-spin","border-2","border-solid","border-t-transparent","border-l-transparent","border-r-transparent"],circle2:["absolute","w-full","h-full","rounded-full","opacity-75","animate-spinner-linear-spin","border-2","border-dotted","border-t-transparent","border-l-transparent","border-r-transparent"],label:"text-foreground dark:text-foreground-dark font-regular"},variants:{size:{sm:{wrapper:"w-5 h-5",circle1:"border-2",circle2:"border-2",label:"text-small"},md:{wrapper:"w-8 h-8",circle1:"border-3",circle2:"border-3",label:"text-medium"},lg:{wrapper:"w-10 h-10",circle1:"border-3",circle2:"border-3",label:"text-large"}},color:{current:{circle1:"border-b-current",circle2:"border-b-current"},white:{circle1:"border-b-white",circle2:"border-b-white"},default:{circle1:"border-b-default",circle2:"border-b-default"},primary:{circle1:"border-b-primary",circle2:"border-b-primary"},secondary:{circle1:"border-b-secondary",circle2:"border-b-secondary"},success:{circle1:"border-b-success",circle2:"border-b-success"},warning:{circle1:"border-b-warning",circle2:"border-b-warning"},danger:{circle1:"border-b-danger",circle2:"border-b-danger"}},labelColor:{foreground:{label:"text-foreground"},primary:{label:"text-primary"},secondary:{label:"text-secondary"},success:{label:"text-success"},warning:{label:"text-warning"},danger:{label:"text-danger"}}},defaultVariants:{size:"md",color:"primary",labelColor:"foreground"}}),j=a(5142),N=(0,y.Gp)((e,r)=>{let{slots:a,classNames:n,label:t,getSpinnerProps:i}=function(e){let[r,a]=(0,y.oe)(e,w.variantKeys),{children:s,className:n,classNames:t,label:i,...o}=r,d=(0,l.useMemo)(()=>w({...a}),[...Object.values(a)]),c=(0,j.W)(null==t?void 0:t.base,n),u=i||s,m=(0,l.useMemo)(()=>u&&"string"==typeof u?u:o["aria-label"]?"":"Loading",[s,u,o["aria-label"]]),p=(0,l.useCallback)(()=>({"aria-label":m,className:d.base({class:c}),...o}),[m,d,c,o]);return{label:u,slots:d,classNames:t,getSpinnerProps:p}}({...e});return(0,s.jsxs)("div",{ref:r,...i(),children:[(0,s.jsxs)("div",{className:a.wrapper({class:null==n?void 0:n.wrapper}),children:[(0,s.jsx)("i",{className:a.circle1({class:null==n?void 0:n.circle1})}),(0,s.jsx)("i",{className:a.circle2({class:null==n?void 0:n.circle2})})]}),t&&(0,s.jsx)("span",{className:a.label(),children:t})]})});N.displayName="NextUI.Spinner";var J=a(1348),k=a(7191),I=(e,r,a)=>Math.min(Math.max(e,r),a),C=e=>{let{ripples:r=[],motionProps:a,color:n="currentColor",style:l,onClear:t}=e;return(0,s.jsx)(s.Fragment,{children:r.map(e=>{let r=I(.01*e.size,.2,e.size>100?.75:.5);return(0,s.jsx)(J.M,{mode:"popLayout",children:(0,s.jsx)(k.E.span,{animate:{transform:"scale(2)",opacity:0},className:"nextui-ripple",exit:{opacity:0},initial:{transform:"scale(0)",opacity:.35},style:{position:"absolute",backgroundColor:n,borderRadius:"100%",transformOrigin:"center",pointerEvents:"none",zIndex:10,top:e.y,left:e.x,width:"".concat(e.size,"px"),height:"".concat(e.size,"px"),...l},transition:{duration:r},onAnimationComplete:()=>{t(e.key)},...a})},e.key)})})};C.displayName="NextUI.Ripple";var G=(0,y.Gp)((e,r)=>{let{Component:a,domRef:n,children:t,styles:i,spinnerSize:b,spinner:g=(0,s.jsx)(N,{color:"current",size:b}),spinnerPlacement:f,startContent:y,endContent:w,isLoading:j,disableRipple:J,getButtonProps:k,getRippleProps:I,isIconOnly:G}=function(e){var r,a,s,n,t,i,b,g;let f=o(),y=!!f,{ref:w,as:j,children:N,startContent:J,endContent:k,autoFocus:I,className:C,spinner:G,fullWidth:z=null!=(r=null==f?void 0:f.fullWidth)&&r,size:B=null!=(a=null==f?void 0:f.size)?a:"md",color:P=null!=(s=null==f?void 0:f.color)?s:"default",variant:S=null!=(n=null==f?void 0:f.variant)?n:"solid",disableAnimation:Z=null!=(t=null==f?void 0:f.disableAnimation)&&t,radius:M=null==f?void 0:f.radius,disableRipple:O=null!=(i=null==f?void 0:f.disableRipple)&&i,isDisabled:_=null!=(b=null==f?void 0:f.isDisabled)&&b,isIconOnly:E=null!=(g=null==f?void 0:f.isIconOnly)&&g,isLoading:A=!1,spinnerPlacement:R="start",onPress:D,onClick:W,...X}=e,F=j||"button",V="string"==typeof F,T=(0,m.gy)(w),{isFocusVisible:U,isFocused:L,focusProps:H}=(0,c.Fx)({autoFocus:I}),K=_||A,Y=(0,l.useMemo)(()=>h({size:B,color:P,variant:S,radius:M,fullWidth:z,isDisabled:K,isInGroup:y,disableAnimation:Z,isIconOnly:E,className:C}),[B,P,S,M,z,K,y,E,Z,C]),{onClick:q,onClear:Q,ripples:$}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[r,a]=(0,l.useState)([]);return{ripples:r,onClick:(0,l.useCallback)(e=>{let r=e.currentTarget,s=Math.max(r.clientWidth,r.clientHeight),n=r.getBoundingClientRect();a(r=>{var a;return[...r,{key:(a=r.length.toString(),"".concat(a,"-").concat(Math.floor(1e6*Math.random()))),size:s,x:e.clientX-n.x-s/2,y:e.clientY-n.y-s/2}]})},[]),onClear:(0,l.useCallback)(e=>{a(r=>r.filter(r=>r.key!==e))},[]),...e}}(),ee=(0,l.useCallback)(e=>{O||K||Z||!T.current||q(e)},[O,K,Z,T,q]),{buttonProps:er,isPressed:ea}=(0,v.j)({elementType:j,isDisabled:K,onPress:D,onClick:(0,u.tS)(W,ee),...X},T),{isHovered:es,hoverProps:en}=(0,x.XI)({isDisabled:K}),el=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"data-disabled":(0,d.PB)(K),"data-focus":(0,d.PB)(L),"data-pressed":(0,d.PB)(ea),"data-focus-visible":(0,d.PB)(U),"data-hover":(0,d.PB)(es),"data-loading":(0,d.PB)(A),...(0,u.dG)(er,H,en,(0,p.z)(X,{enabled:V}),(0,p.z)(e))}},[A,K,L,ea,V,U,es,er,H,en,X]),et=e=>(0,l.isValidElement)(e)?(0,l.cloneElement)(e,{"aria-hidden":!0,focusable:!1,tabIndex:-1}):null,ei=et(J);return{Component:F,children:N,domRef:T,spinner:G,styles:Y,startContent:ei,endContent:et(k),isLoading:A,spinnerPlacement:R,spinnerSize:(0,l.useMemo)(()=>({sm:"sm",md:"sm",lg:"md"})[B],[B]),disableRipple:O,getButtonProps:el,getRippleProps:(0,l.useCallback)(()=>({ripples:$,onClear:Q}),[$,Q]),isIconOnly:E}}({...e,ref:r});return(0,s.jsxs)(a,{ref:n,className:i,...k(),children:[y,j&&"start"===f&&g,j&&G?null:t,j&&"end"===f&&g,w,!J&&(0,s.jsx)(C,{...I()})]})});G.displayName="NextUI.Button";var z=a(4232),B=a(8620).Buffer;function P(){let[e,r]=(0,l.useState)(!1),[i,o]=(0,l.useState)(!1),[d,c]=(0,l.useState)([]),[u,m]=(0,l.useState)([]),p=(0,z.default)(()=>Promise.all([a.e(212),a.e(19),a.e(345),a.e(193)]).then(a.bind(a,8345)),{loadableGenerated:{webpack:()=>[8345]},ssr:!1}),b=e=>{console.log(e)},g=(e,r)=>{let a=[{key:"item",label:"項次",value:r.item},{key:"name",label:"示範點名稱",value:r.name},{key:"map",label:"預覽",value:(0,s.jsx)(p,{data:f(r.name)})}];return"edit"===e&&a.splice(2,0,{key:"input",label:"GPX 匯入",value:(0,s.jsx)("input",{id:"editRouteFile",type:"file",onChange:e=>b(e.target.value)},r.name)}),a},f=e=>[h.find(r=>r.route_name===e)],[h,v]=(0,l.useState)([]),x=()=>{n.Z.get("/api/route/getAll").then(e=>{v(e.data.data)})},y=()=>{let e=new FormData;e.append("file",document.getElementById("editRouteFile").files[0]),e.append("route_name",u.name),e.append("route_id",u.item);let r={headers:{"Content-Type":"multipart/form-data",Authorization:"Basic "+B.from("tycg_admin:TycGaDmIn2024").toString("base64")},params:{isNew:"false"}};n.Z.post("/api/route/save",e,r).then(e=>{alert("儲存成功")})};(0,l.useEffect)(()=>{x()},[]);let w=(0,l.useMemo)(()=>h.map(e=>({item:e.id,name:e.route_name})),[h]);return(0,s.jsx)("main",{children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4 my-5 max-w-[1280px] mx-auto",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{children:"示範點 GPX 路線一覽表"}),(0,s.jsx)(G,{className:"ml-4",color:"secondary",children:"新增路線"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 justify-center gap-4 w-full",children:[(0,s.jsx)("div",{children:(0,s.jsx)(t.Z,{headers:["項次","示範點名稱","操作"],columns:w,isAction:!0,view:e=>{r(!0),o(!1),c(g("view",e))},edit:e=>{r(!0),o(!0),c(g("edit",e)),m(e)}})}),e&&(0,s.jsxs)("div",{className:"border border-default-100 rounded-[14px] shadow-md bg-white p-4",children:[d.map((e,r)=>(0,s.jsxs)("div",{className:"".concat(r===d.length-1&&"rounded-bl-lg rounded-br-lg"," ").concat(0===r&&"border-t rounded-tl-lg rounded-tr-lg"," flex items-center justify-center border-b border-r border-l"),children:[(0,s.jsx)("div",{className:"".concat(0===r&&"rounded-tl-lg"," ").concat(d.length-1===r&&"rounded-bl-lg"," w-[140px] text-sm py-2 px-8 bg-default-100"),children:e.label}),(0,s.jsx)("div",{className:"flex-1 text-center px-8",children:e.value})]},e.key)),(0,s.jsxs)("div",{className:"flex items-center justify-center mt-4",children:[i&&(0,s.jsx)(G,{className:"ml-4",color:"secondary",size:"sm",onClick:()=>y(),children:"完成並儲存"}),(0,s.jsx)(G,{className:"ml-4",color:"default",size:"sm",onClick:()=>r(!1),children:"關閉"})]})]})]})]})})}},5342:function(e,r,a){"use strict";a.d(r,{Z:function(){return p}});var s=a(3827),n=a(6100),l=a(8467),t=a(5875),i=a(5002),o=a(6689),d=a(7915),c=a(1510),u=a(2470),m=a(1347);function p(e){let r=r=>{let{column:a}=r;return(0,s.jsxs)("div",{className:"relative flex items-center gap-2",children:[(0,s.jsx)(t.e,{content:"檢視",children:(0,s.jsx)("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>e.view(a),children:(0,s.jsx)(n.Z,{})})}),(0,s.jsx)(t.e,{content:"編輯",children:(0,s.jsx)("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>e.edit(a),children:(0,s.jsx)(l.Z,{})})})]})};return(0,s.jsxs)(i.b,{"aria-label":"Example static collection table",isStriped:!0,children:[(0,s.jsx)(o.J,{children:e.headers.map(e=>(0,s.jsx)(d.j,{className:"".concat(["第一場","第二場","第三場","數量合計"].includes(e)&&"text-center"," ").concat(["項次","示範點名稱"].includes(e)&&"text-sm"),children:e},e))}),e.isAction?(0,s.jsx)(c.y,{children:e.columns.map((e,a)=>(0,s.jsxs)(u.g,{children:[Object.keys(e).map(r=>(0,s.jsx)(m.X,{className:"".concat(["firstNumber","secondaryNumber","thirdNumber","totalNumber"].includes(r)&&"text-center"," ").concat(["name","item"].includes(r)&&"whitespace-nowrap"),children:e[r]},r)),(0,s.jsx)(m.X,{children:(0,s.jsx)(r,{column:e})},"action")]},a))}):(0,s.jsx)(c.y,{children:e.columns.map((e,r)=>(0,s.jsx)(u.g,{children:Object.keys(e).map(r=>(0,s.jsx)(m.X,{className:"".concat(["firstNumber","secondaryNumber","thirdNumber","totalNumber"].includes(r)&&"text-center"," ").concat(["name","item"].includes(r)&&"whitespace-nowrap"),children:e[r]},r))},r))})]})}}},function(e){e.O(0,[833,310,971,69,744],function(){return e(e.s=1520)}),_N_E=e.O()}]);